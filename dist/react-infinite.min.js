!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Infinite=t()}}(function(){return function t(e,i,r){function n(a,l){if(!i[a]){if(!e[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(o)return o(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return n(i?i:t)},c,c.exports,t,e,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(t,e,i){(function(i){var r=i.React||t("react"),n=t("lodash.isarray"),o=t("lodash.isfinite"),a=t("./computers/constant_infinite_computer.js"),l=t("./computers/array_infinite_computer.js"),s=r.createClass({displayName:"Infinite",propTypes:{handleScroll:r.PropTypes.func,preloadBatchSize:r.PropTypes.number,preloadAdditionalHeight:r.PropTypes.number,elementHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.arrayOf(r.PropTypes.number)]).isRequired,containerHeight:r.PropTypes.number.isRequired,infiniteLoadBeginBottomOffset:r.PropTypes.number,onInfiniteLoad:r.PropTypes.func,loadingSpinnerDelegate:r.PropTypes.node,isInfiniteLoading:r.PropTypes.bool,timeScrollStateLastsForAfterUserScrolls:r.PropTypes.number,className:r.PropTypes.string},getDefaultProps:function(){return{handleScroll:function(){},loadingSpinnerDelegate:r.createElement("div",null),onInfiniteLoad:function(){},isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150}},getInitialState:function(){var t=this.createInfiniteComputer(this.props.elementHeight,this.props.children),e=this.getPreloadBatchSizeFromProps(this.props),i=this.getPreloadAdditionalHeightFromProps(this.props);return{infiniteComputer:t,numberOfChildren:this.props.children.length,displayIndexStart:0,displayIndexEnd:t.getDisplayIndexEnd(e+i),isInfiniteLoading:!1,preloadBatchSize:e,preloadAdditionalHeight:i,scrollTimeout:void 0,isScrolling:!1}},createInfiniteComputer:function(t,e){var i,s=r.Children.count(e);if(o(t))i=new a(t,s);else{if(!n(t))throw new Error("You must provide either a number or an array of numbers as the elementHeight prop.");i=new l(t,s)}return i},componentWillReceiveProps:function(t){var e=this,i={};i.infiniteComputer=this.createInfiniteComputer(t.elementHeight,t.children),void 0!==t.isInfiniteLoading&&(i.isInfiniteLoading=t.isInfiniteLoading),i.preloadBatchSize=this.getPreloadBatchSizeFromProps(t),i.preloadAdditionalHeight=this.getPreloadAdditionalHeightFromProps(t),this.setState(i,function(){e.setStateFromScrollTop(e.getScrollTop())})},getPreloadBatchSizeFromProps:function(t){return t.preloadBatchSize?t.preloadBatchSize:t.containerHeight/2},getPreloadAdditionalHeightFromProps:function(t){return t.preloadAdditionalHeight?t.preloadAdditionalHeight:t.containerHeight},componentDidUpdate:function(t,e){r.Children.count(this.props.children)!==t.children.length&&this.setStateFromScrollTop(this.getScrollTop())},componentWillMount:function(){if(n(this.props.elementHeight)&&this.props.children.length!==this.props.elementHeight.length)throw new Error("There must be as many values provided in the elementHeight prop as there are children.")},getScrollTop:function(){return this.refs.scrollable.getDOMNode().scrollTop},setStateFromScrollTop:function(t){var e=Math.floor(t/this.state.preloadBatchSize),i=this.state.preloadBatchSize*e,r=i+this.state.preloadBatchSize,n=Math.max(0,i-this.state.preloadAdditionalHeight),o=Math.min(this.state.infiniteComputer.getTotalScrollableHeight(),r+this.state.preloadAdditionalHeight);this.setState({displayIndexStart:this.state.infiniteComputer.getDisplayIndexStart(n),displayIndexEnd:this.state.infiniteComputer.getDisplayIndexEnd(o)})},infiniteHandleScroll:function(t){this.props.handleScroll(this.refs.scrollable.getDOMNode()),this.handleScroll(t.target.scrollTop)},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var t=this,e=setTimeout(function(){t.setState({isScrolling:!1,scrollTimeout:void 0})},this.props.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:e})},handleScroll:function(t){this.manageScrollTimeouts(),this.setStateFromScrollTop(t);var e=t>this.state.infiniteComputer.getTotalScrollableHeight()-this.props.containerHeight-this.props.infiniteLoadBeginBottomOffset;e&&!this.state.isInfiniteLoading&&(this.setState({isInfiniteLoading:!0}),this.props.onInfiniteLoad())},buildScrollableStyle:function(){return{height:this.props.containerHeight,overflowX:"hidden",overflowY:"scroll"}},buildHeightStyle:function(t){return{width:"100%",height:Math.ceil(t)+"px"}},render:function(){var t=this.props.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd+1),e={};this.state.isScrolling&&(e.pointerEvents="none");var i=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),n=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);return r.createElement("div",{className:this.props.className?this.props.className:"",ref:"scrollable",style:this.buildScrollableStyle(),onScroll:this.infiniteHandleScroll},r.createElement("div",{ref:"smoothScrollingWrapper",style:e},r.createElement("div",{ref:"topSpacer",style:this.buildHeightStyle(i)}),t,r.createElement("div",{ref:"bottomSpacer",style:this.buildHeightStyle(n)}),r.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.props.loadingSpinnerDelegate:null)))}});e.exports=s,i.Infinite=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./computers/array_infinite_computer.js":5,"./computers/constant_infinite_computer.js":6,"lodash.isarray":2,"lodash.isfinite":3,react:void 0}],2:[function(t,e,i){function r(t){return"string"==typeof t?t:null==t?"":t+""}function n(t){return!!t&&"object"==typeof t}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&S>=t}function a(t){return null==t?!1:g.call(t)==p?y.test(d.call(t)):n(t)&&f.test(t)}function l(t){return t=r(t),t&&u.test(t)?t.replace(c,"\\$&"):t}var s="[object Array]",p="[object Function]",c=/[.*+?^${}()|[\]\/\\]/g,u=RegExp(c.source),f=/^\[object .+?Constructor\]$/,h=Object.prototype,d=Function.prototype.toString,g=h.toString,y=RegExp("^"+l(g).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=a(m=Array.isArray)&&m,S=Math.pow(2,53)-1,b=m||function(t){return n(t)&&o(t.length)&&g.call(t)==s};e.exports=b},{}],3:[function(t,e,i){(function(i){var r=t("lodash.isnative"),n=i.isFinite,o=r(o=Number.isFinite)&&o,a=o||function(t){return"number"==typeof t&&n(t)};e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash.isnative":4}],4:[function(t,e,i){function r(t){return"string"==typeof t?t:null==t?"":t+""}function n(t){return!!t&&"object"==typeof t}function o(t){return null==t?!1:h.call(t)==l?d.test(f.call(t)):n(t)&&c.test(t)}function a(t){return t=r(t),t&&p.test(t)?t.replace(s,"\\$&"):t}var l="[object Function]",s=/[.*+?^${}()|[\]\/\\]/g,p=RegExp(s.source),c=/^\[object .+?Constructor\]$/,u=Object.prototype,f=Function.prototype.toString,h=u.toString,d=RegExp("^"+a(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=o},{}],5:[function(t,e,i){function r(t,e){"use strict";n.call(this,t,e),this.prefixHeightData=this.heightData.reduce(function(t,e){return 0===t.length?[e]:(t.push(t[t.length-1]+e),t)},[])}var n=t("./infinite_computer.js"),o=t("../utils/binary_index_search.js");for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);var l=null===n?null:n.prototype;r.prototype=Object.create(l),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";var t=this.prefixHeightData.length;return 0===t?0:this.prefixHeightData[t-1]}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(t){"use strict";return o.binaryIndexSearch(this.prefixHeightData,t,o.opts.CLOSEST_HIGHER)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(t){"use strict";var e=o.binaryIndexSearch(this.prefixHeightData,t,o.opts.CLOSEST_HIGHER);return"undefined"==typeof e?this.prefixHeightData.length-1:e}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";var e=t-1;return 0>e?0:this.prefixHeightData[e]}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";return-1===t?0:this.getTotalScrollableHeight()-this.prefixHeightData[t]}}),e.exports=r},{"../utils/binary_index_search.js":8,"./infinite_computer.js":7}],6:[function(t,e,i){function r(){"use strict";null!==n&&n.apply(this,arguments)}var n=t("./infinite_computer.js");for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);var a=null===n?null:n.prototype;r.prototype=Object.create(a),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";return this.heightData*this.numberOfChildren}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(t){"use strict";return Math.floor(t/this.heightData)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(t){"use strict";var e=Math.ceil(t/this.heightData);return e>0?e-1:e}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";return t*this.heightData}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";var e=t+1;return Math.max(0,(this.numberOfChildren-e)*this.heightData)}}),e.exports=r},{"./infinite_computer.js":7}],7:[function(t,e,i){function r(t,e){"use strict";this.heightData=t,this.numberOfChildren=e}Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";throw new Error("getTotalScrollableHeight not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getDisplayIndexStart not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getDisplayIndexEnd not implemented.")}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getTopSpacerHeight not implemented.")}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getBottomSpacerHeight not implemented.")}}),e.exports=r},{}],8:[function(t,e,i){var r={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},n=function(t,e,i){for(var n,o,a,l=t.length-1,s=0;l>=s;){if(o=s+Math.floor((l-s)/2),a=t[o],a===e)return o;e>a?s=o+1:a>e&&(l=o-1)}return i===r.CLOSEST_LOWER&&s>0?n=s-1:i===r.CLOSEST_HIGHER&&l<t.length-1&&(n=l+1),n};e.exports={binaryIndexSearch:n,opts:r}},{}]},{},[1])(1)});